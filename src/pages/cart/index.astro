---
import MainLayout from '@/layouts/MainLayout.astro'
import { actions } from 'astro:actions'

// * Este codigo se usaba cuando daba error o que la cookie esta undefined
// const productsInCartCookie = Astro.cookies.get('cart')?.json() ?? []
// const { data: products, error } = await Astro.callAction(
//   actions.loadProductsFromCart,
//   productsInCartCookie
// )

const { data: products, error } = await Astro.callAction(
  actions.loadProductsFromCart,
  {}
)

if (error) {
  console.error(error)
  return Astro.redirect('/')
}

console.log("ðŸš€ ~ products:", products)
---

<MainLayout title="Carrito">
  <h1>Carrito</h1>


</MainLayout>
